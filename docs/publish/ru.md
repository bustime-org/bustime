# Как публиковать данные о текущем положении общественного транспорта в реальном времени

## Архитектура
Bustime работает на основе GPS данных, поступающих с транспортных средств. Эти данные обрабатываются на сервере и в режиме реального времени рассылаются по подключенным клиентам - пользователям сайта и приложений.

Система обновления Bustime поддерживает множество способов получения данных о местоположении общественного транспорта. В зависимости от технических условий вы можете выбрать наиболее подходящий вариант.

1. Сервер Busti.me самостоятельно переодически загружает файл по внешней HTTPS ссылке (каждые 10 секунд). Поддерживаемые протоколы: Bustime, GTFS-RT.

2. Если нет возможности размещать файл в Интернете, то возможно делать POST запросы на https://busti.me/api/upload/

## Диспетчерская информация

Форматы предыдущих файлов подразумевают наличие диспетчерской информации - связи между номером передающего устройства и названием маршрута, который в данный момент выполняет транспортное средство.

Если в городе не организована диспетчерская система, то вы можете вручную вводить информацию в таблицу через сайт busti.me. Этот раздел сайта доступен только для перевозчиков и содержит следующую информацию:
- идентификатор устройства
- регистрационном номер транспортного средства
- выполняемый в текущий момент маршрут
- последняя активность устройства

## Сбор GPS данных напрямую с передатчиков
Общественный транспорт обычно уже оснащен GPS передатчиками и данные сохраняются на местных серверах. Если данные не сохраняются на одном сервере, то мы можем принимать их напрямую с GPS передатчиков. Поддерживаемые протоколы:  Arnavi, Галилео, GPS101, SAT-LITE, Виалон IPS, Виалон NIS (SOAP / Олимпстрой), ЕГТС (ЭРА-ГЛОНАСС).

## Сбор GPS данных через приложение Bustime
Если транспортное средство не оснащено GPS передатчиками, то вы можете использовать любой телефон или планшет с браузером или приложение Bustime. Водителю нужно зарегистрироваться, активировать режим водителя и выбрать маршрут, который сейчас выполняет. Мобильное устройство будет получать свои GPS координаты и передавать их по мобильному Интернету на сервера Bustime каждые 10 секунд.

При таком способе передачи нет необходимости в диспетчерской информации, потому что водитель сам выбирает выполняемый маршрут.

## Ретрансляция данных
Bustime может ретранслировать поступающие данные по протоколам Websocket и Bustime. Это позволяет публиковать данные через API для других разработчиков без дополнительной нагрузки на сервера транспортной компании.

## Ответственные за передачу данных:
Организация, непосредственно оказывающая транспортные перевозки или департамент городского транспорта.
