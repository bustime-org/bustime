(function(b,c){function m(){b.removeEventListener("load",m,!1);g=!0}function a(e){return n=n||new a.Class(e)}function h(a,b){for(var c in b)a[c]=b[c];return a}function p(){"#ath"==c.location.hash&&history.replaceState("",b.document.title,c.location.href.split("#")[0]);k.test(c.location.href)&&history.replaceState("",b.document.title,c.location.href.replace(k,"$1"));l.test(c.location.search)&&history.replaceState("",b.document.title,c.location.href.replace(l,"$2"))}var g=!1;"complete"===c.readyState?
g=!0:b.addEventListener("load",m,!1);var k=/\/ath(\/)?$/,l=/([\?&]ath=[^&]*$|&ath=[^&]*(&))/,n;a.intl={de_de:{message:"Um diese Web-App zum Home-Bildschirm hinzuzuf\u00fcgen, tippen Sie auf %icon und dann <strong>%action</strong>.",action:{ios:"Zum Home-Bildschirm",android:"Zum Startbildschirm hinzuf\u00fcgen",windows:"Auf Startseite"}},en_us:{message:"To add this web app to the home screen: tap %icon and then <strong>%action</strong>.",action:{ios:"Add to Home Screen",android:"Add to homescreen",
windows:"pin to start"}},es_es:{message:"Para a\u00f1adir esta aplicaci\u00f3n web a la pantalla de inicio: pulsa %icon y selecciona <strong>%action</strong>.",action:{ios:"A\u00f1adir a pantalla de inicio",android:"A\u00f1adir a pantalla de inicio",windows:"A\u00f1adir a inicio"}},fr_fr:{message:"Pour ajouter cette application web sur l'\u00e9cran d'accueil : Appuyez %icon et s\u00e9lectionnez <strong>%action</strong>.",action:{ios:"Ajouter sur l'\u00e9cran d'accueil",android:"Ajouter \u00e0 l'\u00e9cran d'accueil",
windows:"\u00c9pingler \u00e0 l'\u00e9cran d'accueil"}},it_it:{message:"Per Aggiungere questa web app alla schermata iniziale: premi %icon e poi <strong>%action</strong>.",action:{ios:"Aggiungi a Home",android:"Aggiungi alla homescreen",windows:"aggiungi a start"}},nb_no:{message:"For \u00e5 installere denne appen p\u00e5 hjem-skjermen: trykk p\u00e5 %icon og deretter <strong>%action</strong>.",action:{ios:"Legg til p\u00e5 Hjem-skjerm",android:"Legg til p\u00e5 startsiden",windows:"fest til start"}},
nl_nl:{message:"Om deze webapp op je telefoon te installeren, klik op %icon en dan <strong>%action</strong>.",action:{ios:"Voeg toe aan beginscherm",android:"Toevoegen aan startscherm",windows:"Aan startscherm vastmaken"}},ru_ru:{message:"\u0427\u0442\u043e\u0431\u044b \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u044d\u0442\u043e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043d\u0430 \u0432\u0430\u0448 \u0434\u043e\u043c\u0430\u0448\u043d\u0438\u0439 \u044d\u043a\u0440\u0430\u043d: \u043d\u0430\u0436\u043c\u0438\u0442\u0435 %icon \u0438 \u043f\u043e\u0442\u043e\u043c <strong>%action</strong>.",
action:{ios:"\u041d\u0430 \u044d\u043a\u0440\u0430\u043d <\u0414\u043e\u043c\u043e\u0439>",android:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u044b\u0439 \u044d\u043a\u0440\u0430\u043d",windows:"\u043f\u0440\u0438\u043a\u0440\u0435\u043f\u0438\u0442\u044c \u043a \u043f\u0443\u0441\u043a\u0443"}},sv_se:{message:"F\u00f6r att l\u00e4gga till denna webbapplikation p\u00e5 hemsk\u00e4rmen: tryck p\u00e5 %icon och d\u00e4refter <strong>%action</strong>.",
action:{ios:"L\u00e4gg till p\u00e5 hemsk\u00e4rmen",android:"L\u00e4gg til p\u00e5 startsk\u00e4rmen",windows:"f\u00e4st p\u00e5 startsk\u00e4rmen"}},zh_cn:{message:"\u5982\u8981\u628a\u5e94\u7528\u7a0b\u5f0f\u52a0\u81f3\u4e3b\u5c4f\u5e55,\u8bf7\u70b9\u51fb%icon, \u7136\u540e<strong>%action</strong>",action:{ios:"\u52a0\u81f3\u4e3b\u5c4f\u5e55",android:"\u52a0\u81f3\u4e3b\u5c4f\u5e55",windows:"\u6309\u4f4f\u542f\u52a8"}},zh_tw:{message:"\u5982\u8981\u628a\u61c9\u7528\u7a0b\u5f0f\u52a0\u81f3\u4e3b\u5c4f\u5e55, \u8acb\u9ede\u64ca%icon, \u7136\u5f8c<strong>%action</strong>.",
action:{ios:"\u52a0\u81f3\u4e3b\u5c4f\u5e55",android:"\u52a0\u81f3\u4e3b\u5c4f\u5e55",windows:"\u6309\u4f4f\u555f\u52d5"}}};for(var d in a.intl)a.intl[d.substr(0,2)]=a.intl[d];a.defaults={appID:"org.cubiq.addtohome",fontSize:15,debug:!1,modal:!1,mandatory:!1,autostart:!0,skipFirstVisit:!1,startDelay:1,lifespan:15,displayPace:1440,maxDisplayCount:0,icon:!0,message:"",validLocation:[],onInit:null,onShow:null,onRemove:null,onAdd:null,onPrivate:null,detectHomescreen:!1};d=b.navigator.userAgent;var q=
b.navigator;h(a,{hasToken:"#ath"==c.location.hash||k.test(c.location.href)||l.test(c.location.search),isRetina:b.devicePixelRatio&&1<b.devicePixelRatio,isIDevice:/iphone|ipod|ipad/i.test(d),isMobileChrome:-1<d.indexOf("Android")&&/Chrome\/[.0-9]*/.test(d),isMobileIE:-1<d.indexOf("Windows Phone"),language:q.language&&q.language.toLowerCase().replace("-","_")||""});a.language=a.language&&a.language in a.intl?a.language:"en_us";a.isMobileSafari=a.isIDevice&&-1<d.indexOf("Safari")&&0>d.indexOf("CriOS");
a.OS=a.isIDevice?"ios":a.isMobileChrome?"android":a.isMobileIE?"windows":"unsupported";a.OSVersion=d.match(/(OS|Android) (\d+[_\.]\d+)/);a.OSVersion=a.OSVersion&&a.OSVersion[2]?+a.OSVersion[2].replace("_","."):0;a.isStandalone=b.navigator.standalone||a.isMobileChrome&&40>screen.height-c.documentElement.clientHeight;a.isTablet=a.isMobileSafari&&-1<d.indexOf("iPad")||a.isMobileChrome&&0>d.indexOf("Mobile");a.isCompatible=a.isMobileSafari&&6<=a.OSVersion||a.isMobileChrome;var r={lastDisplayTime:0,returningVisitor:!1,
displayCount:0,optedout:!1,added:!1};a.removeSession=function(b){try{localStorage.removeItem(b||a.defaults.appID)}catch(c){}};a.Class=function(e){this.options=h({},a.defaults);h(this.options,e);this.options.mandatory=this.options.mandatory&&("standalone"in b.navigator||this.options.debug);this.options.modal=this.options.modal||this.options.mandatory;this.options.mandatory&&(this.options.startDelay=-.5);this.options.detectHomescreen=!0===this.options.detectHomescreen?"hash":this.options.detectHomescreen;
this.options.debug&&(a.isCompatible=!0,a.OS="string"==typeof this.options.debug?this.options.debug:"unsupported"==a.OS?"android":a.OS,a.OSVersion="ios"==a.OS?"7":"4");this.container=c.documentElement;this.session=JSON.parse(localStorage.getItem(this.options.appID));!a.hasToken||a.isCompatible&&this.session||(a.hasToken=!1,p());if(a.isCompatible){this.session=this.session||r;try{localStorage.setItem(this.options.appID,JSON.stringify(this.session)),a.hasLocalStorage=!0}catch(d){a.hasLocalStorage=!1,
this.options.onPrivate&&this.options.onPrivate.call(this)}e=!this.options.validLocation.length;for(var f=this.options.validLocation.length;f--;)if(this.options.validLocation[f].test(c.location.href)){e=!0;break}localStorage.getItem("addToHome")&&this.optOut();if(!this.session.optedout&&!this.session.added&&e)if(a.isStandalone)this.session.added||(this.session.added=!0,this.updateSession(),this.options.onAdd&&a.hasLocalStorage&&this.options.onAdd.call(this));else{if(this.options.detectHomescreen){if(a.hasToken){p();
this.session.added||(this.session.added=!0,this.updateSession(),this.options.onAdd&&a.hasLocalStorage&&this.options.onAdd.call(this));return}"hash"==this.options.detectHomescreen?history.replaceState("",b.document.title,c.location.href+"#ath"):"smartURL"==this.options.detectHomescreen?history.replaceState("",b.document.title,c.location.href.replace(/(\/)?$/,"/ath$1")):history.replaceState("",b.document.title,c.location.href+(c.location.search?"&":"?")+"ath=")}if(!this.session.returningVisitor&&(this.session.returningVisitor=
!0,this.updateSession(),this.options.skipFirstVisit))return;a.hasLocalStorage&&(this.ready=!0,this.options.onInit&&this.options.onInit.call(this),this.options.autostart&&this.show())}}};a.Class.prototype={events:{load:"_delayedShow",error:"_delayedShow",orientationchange:"resize",resize:"resize",scroll:"resize",click:"remove",touchmove:"_preventDefault",transitionend:"_removeElements",webkitTransitionEnd:"_removeElements",MSTransitionEnd:"_removeElements"},handleEvent:function(a){var b=this.events[a.type];
if(b)this[b](a)},show:function(e){if(this.options.autostart&&!g)setTimeout(this.show.bind(this),50);else if(!this.shown){var d=Date.now(),f=this.session.lastDisplayTime;!0!==e&&(!this.ready||d-f<6E4*this.options.displayPace||this.options.maxDisplayCount&&this.session.displayCount>=this.options.maxDisplayCount)||(this.shown=!0,this.session.lastDisplayTime=d,this.session.displayCount++,this.updateSession(),this.applicationIcon||(this.applicationIcon="ios"==a.OS?c.querySelector('head link[rel^=apple-touch-icon][sizes="152x152"],head link[rel^=apple-touch-icon][sizes="144x144"],head link[rel^=apple-touch-icon][sizes="120x120"],head link[rel^=apple-touch-icon][sizes="114x114"],head link[rel^=apple-touch-icon]'):
c.querySelector('head link[rel^="shortcut icon"][sizes="196x196"],head link[rel^=apple-touch-icon]')),e="",e=this.options.message in a.intl?a.intl[this.options.message].message.replace("%action",a.intl[this.options.message].action[a.OS]):""!==this.options.message?this.options.message:a.intl[a.language].message.replace("%action",a.intl[a.language].action[a.OS]),e="<p>"+e.replace("%icon",'<span class="ath-action-icon">icon</span>')+"</p>",this.viewport=c.createElement("div"),this.viewport.className=
"ath-viewport",this.options.modal&&(this.viewport.className+=" ath-modal"),this.options.mandatory&&(this.viewport.className+=" ath-mandatory"),this.viewport.style.position="absolute",this.element=c.createElement("div"),this.element.className="ath-container ath-"+a.OS+" ath-"+a.OS+(a.OSVersion+"").substr(0,1)+" ath-"+(a.isTablet?"tablet":"phone"),this.element.style.cssText="-webkit-transition-property:-webkit-transform,opacity;-webkit-transition-duration:0;-webkit-transform:translate3d(0,0,0);transition-property:transform,opacity;transition-duration:0;transform:translate3d(0,0,0);-webkit-transition-timing-function:ease-out",
this.element.style.webkitTransform="translate3d(0,-"+b.innerHeight+"px,0)",this.element.style.webkitTransitionDuration="0s",this.options.icon&&this.applicationIcon&&(this.element.className+=" ath-icon",this.img=c.createElement("img"),this.img.className="ath-application-icon",this.img.addEventListener("load",this,!1),this.img.addEventListener("error",this,!1),this.img.src=this.applicationIcon.href,this.element.appendChild(this.img)),this.element.innerHTML+=e,this.viewport.style.left="-99999em",this.viewport.appendChild(this.element),
this.container.appendChild(this.viewport),this.img||this._delayedShow())}},_delayedShow:function(a){setTimeout(this._show.bind(this),1E3*this.options.startDelay+500)},_show:function(){var a=this;this.updateViewport();b.addEventListener("resize",this,!1);b.addEventListener("scroll",this,!1);b.addEventListener("orientationchange",this,!1);this.options.modal&&c.addEventListener("touchmove",this,!0);this.options.mandatory||setTimeout(function(){a.element.addEventListener("click",a,!0)},1E3);setTimeout(function(){a.element.style.webkitTransform=
"translate3d(0,0,0)";a.element.style.webkitTransitionDuration="1.2s"},0);this.options.lifespan&&(this.removeTimer=setTimeout(this.remove.bind(this),1E3*this.options.lifespan));this.options.onShow&&this.options.onShow.call(this)},remove:function(){clearTimeout(this.removeTimer);this.img&&(this.img.removeEventListener("load",this,!1),this.img.removeEventListener("error",this,!1));b.removeEventListener("resize",this,!1);b.removeEventListener("scroll",this,!1);b.removeEventListener("orientationchange",
this,!1);c.removeEventListener("touchmove",this,!0);this.element.removeEventListener("click",this,!0);this.element.addEventListener("transitionend",this,!1);this.element.addEventListener("webkitTransitionEnd",this,!1);this.element.addEventListener("MSTransitionEnd",this,!1);this.element.style.webkitTransitionDuration="0.3s";this.element.style.opacity="0"},_removeElements:function(){this.element.removeEventListener("transitionend",this,!1);this.element.removeEventListener("webkitTransitionEnd",this,
!1);this.element.removeEventListener("MSTransitionEnd",this,!1);this.container.removeChild(this.viewport);this.shown=!1;this.options.onRemove&&this.options.onRemove.call(this)},updateViewport:function(){if(this.shown){this.viewport.style.width=b.innerWidth+"px";this.viewport.style.height=b.innerHeight+"px";this.viewport.style.left=b.scrollX+"px";this.viewport.style.top=b.scrollY+"px";var e=c.documentElement.clientWidth;this.orientation=e>c.documentElement.clientHeight?"landscape":"portrait";var d=
"ios"==a.OS?"portrait"==this.orientation?screen.width:screen.height:screen.width;this.scale=screen.width>e?1:d/b.innerWidth;this.element.style.fontSize=this.options.fontSize/this.scale+"px"}},resize:function(){clearTimeout(this.resizeTimer);this.resizeTimer=setTimeout(this.updateViewport.bind(this),100)},updateSession:function(){!1!==a.hasLocalStorage&&localStorage.setItem(this.options.appID,JSON.stringify(this.session))},clearSession:function(){this.session=r;this.updateSession()},optOut:function(){this.session.optedout=
!0;this.updateSession()},optIn:function(){this.session.optedout=!1;this.updateSession()},clearDisplayCount:function(){this.session.displayCount=0;this.updateSession()},_preventDefault:function(a){a.preventDefault();a.stopPropagation()}};b.addToHomescreen=a})(window,document);